from src import parser
import pytest


@pytest.mark.parametrize(
    "tokens, new_tokens",
    [
        ([('OP', '-'), ('NUM', 5)], [('OP', 'NEG'), ('NUM', 5)]),
        ([('OP', '+'), ('NUM', 5)], [('NUM', 5)]),
        ([('LP', '('), ('OP', '-'), ('NUM', 3), ('RP', ')')], [('LP', '('), ('OP', 'NEG'), ('NUM', 3), ('RP', ')')]),
        ([('LP', '('), ('OP', '+'), ('NUM', 3), ('RP', ')')], [('LP', '('), ('NUM', 3), ('RP', ')')]),
        ([('NUM', 2), ('OP', '*'), ('OP', '-'), ('NUM', 7)], [('NUM', 2), ('OP', '*'), ('OP', 'NEG'), ('NUM', 7)]),
        ([('NUM', 2), ('OP', '*'), ('OP', '+'), ('NUM', 7)], [('NUM', 2), ('OP', '*'), ('NUM', 7)]),
        ([('LP', '('), ('NUM', 2), ('RP', ')'), ('OP', '-'), ('NUM', 1)],
         [('LP', '('), ('NUM', 2), ('RP', ')'), ('OP', '-'), ('NUM', 1)]),
        ([('LP', '('), ('NUM', 2), ('RP', ')'), ('OP', '+'), ('NUM', 1)],
         [('LP', '('), ('NUM', 2), ('RP', ')'), ('OP', '+'), ('NUM', 1)]),
        ([('OP', '-'), ('OP', '-'), ('NUM', 5)], [('OP', 'NEG'), ('OP', 'NEG'), ('NUM', 5)]),
        ([('OP', '+'), ('OP', '+'), ('NUM', 5)], [('NUM', 5)]),
        ([('OP', '+'), ('OP', '-'), ('NUM', 5)], [('OP', 'NEG'), ('NUM', 5)]),
        ([('NUM', 1), ('OP', '+'), ('OP', '+'), ('OP', '-'), ('NUM', 5)],
         [('NUM', 1), ('OP', '+'), ('OP', 'NEG'), ('NUM', 5)]),
        ([('NUM', 1), ('OP', '*'), ('OP', '-'), ('OP', '+'), ('NUM', 5)],
         [('NUM', 1), ('OP', '*'), ('OP', 'NEG'), ('NUM', 5)]),
        ([('LP', '('), ('OP', '+'), ('OP', '-'), ('NUM', 5), ('RP', ')')],
         [('LP', '('), ('OP', 'NEG'), ('NUM', 5), ('RP', ')')]),
        ([('NUM', 10), ('OP', '-'), ('NUM', 3)], [('NUM', 10), ('OP', '-'), ('NUM', 3)]),
        ([('LP', '('), ('NUM', 1), ('RP', ')'), ('OP', '-'), ('NUM', 2)],
         [('LP', '('), ('NUM', 1), ('RP', ')'), ('OP', '-'), ('NUM', 2)]),
        ([('OP', '-'), ('NUM', 5), ('OP', '-'), ('NUM', 3)], [('OP', 'NEG'), ('NUM', 5), ('OP', '-'), ('NUM', 3)]),
        ([('NUM', 2), ('RP', ')'), ('OP', '-'), ('OP', '+'), ('NUM', 5)],
         [('NUM', 2), ('RP', ')'), ('OP', '-'), ('NUM', 5)]),
        ([('NUM', 2), ('OP', '*'), ('NUM', 3), ('OP', '**'), ('NUM', 2)],
         [('NUM', 2), ('OP', '*'), ('NUM', 3), ('OP', '**'), ('NUM', 2)])
    ]
)
def test_annotate_unary(tokens, new_tokens):
    assert parser.annotate_unary(tokens) == new_tokens
